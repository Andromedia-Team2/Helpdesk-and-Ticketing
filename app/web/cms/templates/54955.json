{"content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  const {\n    tanggal_waktu_percakapan,\n    isi_percakapan,\n    attachment,\n    id_history_ticket,\n    id_user,\n    id_employee,\n  } = req.body;\n\n  const date = ext.format(tanggal_waktu_percakapan);\n  if (id_employee !== null) {\n    await db.history_ticket.update({\n      where: {\n        id_history_ticket,\n      },\n      data: {\n        id_employee,\n      },\n    });\n  }\n  await db.percakapan.create({\n    data: {\n      tanggal_waktu_percakapan: date,\n      isi_percakapan,\n      attachment,\n      id_history_ticket,\n      id_user,\n    },\n  });\n  reply.send({\n    status: \"SUCCESS\",\n    message: \"Berhasil tambah data\",\n  })\n}","figma":{}},"title":"add-message","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"66283","slug":"/api/message","site":"*","id":"54955"}