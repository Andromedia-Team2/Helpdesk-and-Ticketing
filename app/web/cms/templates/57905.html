<>
  <effect
    meta={{
      departments: [],
      id_vendor: 0,
      id_department: 0,
      nama_employee: "",
      nomor_employee: "",
      email_employee: "",
      shift_kerja: "",
      id_dep: 0,
    }}
    run={async () => {
      let modal = document.getElementById("my-modal");
      let success = document.getElementById("my-success");
      let loading = document.getElementById("my-loading");
      meta.departments = await api("/api/get-department");
      meta.id_vendor = user.dataUser.id_vendor;
      console.log(meta.id_vendor);
      meta.action = {
        namaDepartmentChange: (e, f) => {
          runInAction(() => {
            meta.id_dep = e;
            meta.id_department = parseInt(meta.id_dep);
          });
        },
        namaEmployeeChange: (e) => {
          runInAction(() => {
            meta.nama_employee = e.target.value;
            console.log(meta.nama_employee);
          });
        },
        nomorEmployeeChange: (e) => {
          runInAction(() => {
            meta.nomor_employee = e.target.value;
            console.log(meta.nomor_employee);
          });
        },
        emailEmployeeChange: (e) => {
          runInAction(() => {
            meta.email_employee = e.target.value;
            console.log(meta.email_employee);
          });
        },
        shiftKerjaChange: (e) => {
          runInAction(() => {
            meta.shift_kerja = e.target.value;
            console.log(meta.shift_kerja);
          });
        },
        addData: (e) => {
          modal.style.display = "block";
          loading.style.display = "block";
          api("/api/employee-data/add", {
            id_vendor: meta.id_vendor,
            id_department: meta.id_department,
            nama_employee: meta.nama_employee,
            nomor_employee: meta.nomor_employee,
            email_employee: meta.email_employee,
            shift_kerja: meta.shift_kerja,
          }).then((e) => {
            console.log(e);
            if (e.status == "SUCCESS") {
              loading.style.display = "none";
              success.style.display = "block";
              window.location.replace("/employee-data");
            } else {
              modal.style.display = "none";
              loading.style.display = "none";
              console.log(e);
            }
          });
        },
      };
    }}
  />
  <div class="flex flex-col items-start m-6 h-full justify-start bg-gray-50">
    <div class="flex flex-1 flex-col w-full space-y-4 items-start justify-start py-6 bg-white shadow-md rounded-xl px-6">
      <div class="flex self-stretch items-center justify-between">
        <div class="flex items-start justify-start">
          <div class="text-xl font-medium tracking-wide leading-loose text-center text-gray-800">
            EMPLOYEE DATA - CREATE DATA
          </div>
        </div>
      </div>
      <hr class=" w-full pb-4"></hr>
      <div class="flex flex-col space-y-6 w-full h-full items-center justify-start">
        <div class="flex self-stretch items-start justify-start px-5">
          <div class="flex flex-1 items-center justify-start ">
            <div class="flex items-center w-48 justify-start text-md font-bold text-gray-800">
              Department Name
            </div>
            <select
              class="flex self-stretch text-gray-600 w-full items-center font-medium justify-start py-2 pl-4 pr-5 bg-gray-100 rounded-lg text-sm"
              name="id_department"
              onChange={(e) => {
                meta.action.namaDepartmentChange(
                  e.target.value,
                  "id_department"
                );
              }}
            >
              {meta.departments?.data?.map((p) => (
                <option key={p.id_department} value={p.id_department}>
                  {p.nama_department}
                </option>
              ))}
            </select>
          </div>
        </div>
        <div class="flex self-stretch items-start justify-start px-5">
          <div class="flex flex-1 items-center justify-start ">
            <div class="flex items-center w-48 justify-start text-md font-bold text-gray-800">
              Employee Name
            </div>
            <input
              type="text"
              value={meta.nama_employee}
              onChange={(e) => meta.action.namaEmployeeChange(e)}
              class="flex self-stretch text-gray-600 w-full items-center font-medium justify-start py-2 pl-4 pr-5 bg-gray-100 rounded-lg text-sm"
              placeholder="type your employee name here ..."
            />
          </div>
        </div>
        <div class="flex self-stretch items-start justify-start px-5">
          <div class="flex flex-1 items-center justify-start ">
            <div class="flex items-center w-48 justify-start text-md font-bold text-gray-800">
              Work Shift
            </div>
            <input
              type="text"
              value={meta.shift_kerja}
              onChange={(e) => meta.action.shiftKerjaChange(e)}
              class="flex self-stretch text-gray-600 w-full items-center font-medium justify-start py-2 pl-4 pr-5 bg-gray-100 rounded-lg text-sm"
              placeholder="type your employee work shift here ..."
            />
          </div>
        </div>
        <div class="flex self-stretch items-start justify-start px-5">
          <div class="flex flex-1 items-center justify-start ">
            <div class="flex items-center w-48 justify-start text-md font-bold text-gray-800">
              Email
            </div>
            <input
              type="text"
              value={meta.email_employee}
              onChange={(e) => meta.action.emailEmployeeChange(e)}
              class="flex self-stretch text-gray-600 w-full items-center font-medium justify-start py-2 pl-4 pr-5 bg-gray-100 rounded-lg text-sm"
              placeholder="type your employee email here ..."
            />
          </div>
        </div>
        <div class="flex self-stretch items-start justify-start px-5">
          <div class="flex flex-1 items-center justify-start ">
            <div class="flex items-center w-48 justify-start text-md font-bold text-gray-800">
              Phone
            </div>
            <input
              type="text"
              value={meta.nomor_employee}
              onChange={(e) => meta.action.nomorEmployeeChange(e)}
              class="flex self-stretch text-gray-600 w-full items-center font-medium justify-start py-2 pl-4 pr-5 bg-gray-100 rounded-lg text-sm"
              placeholder="type your employee phone here ..."
            />
          </div>
        </div>
        <button
          onClick={() => {
            meta.action.addData();
          }}
          class="flex space-x-3 items-center justify-center px-6 py-2 bg-red-900 shadow rounded-xl"
          style="max-width: 200px;"
        >
          <img
            src="/fimgs/460_875.x1.svg"
            style=" max-width: 15px; max-height: 20px;"
          />
          <div class="text-sm font-medium tracking-wide leading-relaxed text-white">
            Create New
          </div>
        </button>
      </div>
    </div>
  </div>

  <div
    class="fixed hidden inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full"
    id="my-modal"
  >
    <div class="relative top-48 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <div id="my-success" class="mt-3 hidden text-center">
        <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100">
          <svg
            class="h-10 w-10 text-red-900"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 13l4 4L19 7"
            ></path>
          </svg>
        </div>
        <h3 class="text-lg leading-6 font-medium text-gray-900">Successful!</h3>
        <div class="mt-2 px-3 py-3">
          <p class="text-sm text-gray-500">Data has been successfully added!</p>
        </div>
      </div>
      <div id="my-loading" class="mt-6 hidden text-center">
        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full">
          <div class="loader ease-linear rounded-full border-5 border-t-4 border-gray-200 h-12 w-12 mb-4"></div>
        </div>
        <h3 class="text-lg leading-6 font-medium text-gray-900">
          Processing ...
        </h3>
        <div class="mt-2 px-3 py-3">
          <p class="text-sm text-gray-500">
            Please wait a moment for the saving process
          </p>
        </div>
      </div>
    </div>
  </div>
</>